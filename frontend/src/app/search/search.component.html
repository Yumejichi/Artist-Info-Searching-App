<div class="container pb-5 mb-4">
    <div class="row">
      <div class="col-12 col-sm-11 col-md-9 mx-auto mt-3"> 
    <form id="search" (submit)="onSearch(searchForm)" #searchForm="ngForm">
        <div class= "input-group mb-3">
            <label for="artistName" class="form-label"></label>
            <input name="artistName" id="artistName" type="text" class="form-control rounded-start" placeholder="Please enter an artist name." required ngModel>

            <button type="submit" class="btn btn-primary" style="background-color: #004d8f;" [disabled]="searchForm.invalid">search
                <div *ngIf="isLoading" class="spinner-border spinner-border-sm  text-light" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </button>

            <button type="reset" class="btn btn-secondary rounded-end" (click)="resetPage()">clear</button>        
        </div>
    </form>


    <div class="alert alert-danger" role="alert" *ngIf="noData && artistsData.length === 0  && searchForm.submitted">
        No results.
    </div>

    <section>
        <div class="d-flex flex-row flex-nowrap overflow-auto mx-auto">
            <div *ngFor="let artist of artistsData">
                <div class="card artist-card me-2" style="width: 11.6rem;" (click)="onClickCard(artist.artist_id)" [class.artist-selected] = "artist.artist_id===clickedArtistCardId">
                    
                    <img [src]="artist.imageUrl" class="card-img-top" style="height: 180px; object-fit: cover;">

                    <div *ngIf="userIsLoggedIn" class="card-img-overlay d-flex justify-content-end align-items-start p-2">
                        <button *ngIf="!userFavoritesSet.has(artist.artist_id)" 
                        (click)="toggleFavorites(artist.artist_id)" class="btn rounded-circle d-flex align-items-center justify-content-center p-1" style="background-color: #004d8f;">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" width="1.5em" height="1.5em"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path fill="white" d="M287.9 0c9.2 0 17.6 5.2 21.6 13.5l68.6 141.3 153.2 22.6c9 1.3 16.5 7.6 19.3 16.3s.5 18.1-5.9 24.5L433.6 328.4l26.2 155.6c1.5 9-2.2 18.1-9.7 23.5s-17.3 6-25.3 1.7l-137-73.2L151 509.1c-8.1 4.3-17.9 3.7-25.3-1.7s-11.2-14.5-9.7-23.5l26.2-155.6L31.1 218.2c-6.5-6.4-8.7-15.9-5.9-24.5s10.3-14.9 19.3-16.3l153.2-22.6L266.3 13.5C270.4 5.2 278.7 0 287.9 0zm0 79L235.4 187.2c-3.5 7.1-10.2 12.1-18.1 13.3L99 217.9 184.9 303c5.5 5.5 8.1 13.3 6.8 21L171.4 443.7l105.2-56.2c7.1-3.8 15.6-3.8 22.6 0l105.2 56.2L384.2 324.1c-1.3-7.7 1.2-15.5 6.8-21l85.9-85.1L358.6 200.5c-7.8-1.2-14.6-6.1-18.1-13.3L287.9 79z"/></svg>
                        </button>
                        <button *ngIf="userFavoritesSet.has(artist.artist_id)" 
                        (click)="toggleFavorites(artist.artist_id)" class="btn rounded-circle d-flex align-items-center justify-content-center p-1" style="background-color: #004d8f;">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" width="1.5em" height="1.5em"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path fill="#ffcc00" d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"/>
                            </svg>
                        </button>
                    </div>



                    <div class="card-body rounded-bottom d-flex align-items-center">
                        <h5 class="card-title text-white mb-0" style="font-size: 1.0rem;">{{artist.name}}</h5>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="mt-3" id="artist-detail" *ngIf="isCardClicked">
        <ul class="nav nav-pills nav-fill mx-auto pb-3" id="artist-data-tab" role="tablist">
            <li class="nav-item" role="presentation">
            <button class="nav-link" [class.active]="selectedTab === 'ArtistInfo'" (click)="setSelectedTab('ArtistInfo')" id="pills-info-tab" data-bs-toggle="pill" data-bs-target="#pills-info" type="button" role="tab" aria-controls="pills-info" aria-selected="true">Artist Info</button>
            </li>
            <li class="nav-item" role="presentation">
            <button class="nav-link" [class.active]="selectedTab === 'Artwork'" (click)="setSelectedTab('Artwork')" id="pills-artworks-tab" data-bs-toggle="pill" data-bs-target="#pills-artworks" type="button" role="tab" aria-controls="pills-artworks" aria-selected="false">Artworks</button>
            </li>
        </ul>
            <div>
                <div *ngIf="!isLoadingDetail">
                    <div class="tab-content mt-3" id="artist-data-tabContent">
                        <div class="tab-pane fade show active" *ngIf="selectedTab === 'ArtistInfo'" id="pills-info" role="tabpanel" aria-labelledby="pills-info-tab">
                            <div class="d-flex justify-content-center">
                                <div>
                                <div class="fw-bold fs-4 text-center lh-1">{{this.artistInfoData.name}}
                                </div>
                                <div class="small text-center">
                                    {{this.artistInfoData.nationality}}<span *ngIf="artistInfoData.birthday && (artistInfoData.birthday || artistInfoData.deathday)">, </span> 
                                    {{this.artistInfoData.birthday}} 
                                    <span *ngIf="artistInfoData.birthday || artistInfoData.deathday">-</span> 
                                    {{this.artistInfoData.deathday}}
                                </div>
                            </div>
                                <div *ngIf="userIsLoggedIn && !isLoadingDetail">
                                    <button *ngIf="userFavoritesSet.has(clickedArtistCardId)" 
                                    (click)="toggleFavorites(clickedArtistCardId)" style="background-color: transparent;" >
                                        <svg xmlns="http://www.w3.org/2000/svg" class="fs-4" viewBox="0 0 576 512" width="1em" height="1em"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path fill="#ffcc00" d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"/>
                                        </svg>
                                    </button>
                                    <button  *ngIf="!userFavoritesSet.has(clickedArtistCardId)" (click)="toggleFavorites(clickedArtistCardId)"  style="background-color: transparent;">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="fs-4" viewBox="0 0 576 512" width="1em" height="1em"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M287.9 0c9.2 0 17.6 5.2 21.6 13.5l68.6 141.3 153.2 22.6c9 1.3 16.5 7.6 19.3 16.3s.5 18.1-5.9 24.5L433.6 328.4l26.2 155.6c1.5 9-2.2 18.1-9.7 23.5s-17.3 6-25.3 1.7l-137-73.2L151 509.1c-8.1 4.3-17.9 3.7-25.3-1.7s-11.2-14.5-9.7-23.5l26.2-155.6L31.1 218.2c-6.5-6.4-8.7-15.9-5.9-24.5s10.3-14.9 19.3-16.3l153.2-22.6L266.3 13.5C270.4 5.2 278.7 0 287.9 0zm0 79L235.4 187.2c-3.5 7.1-10.2 12.1-18.1 13.3L99 217.9 184.9 303c5.5 5.5 8.1 13.3 6.8 21L171.4 443.7l105.2-56.2c7.1-3.8 15.6-3.8 22.6 0l105.2 56.2L384.2 324.1c-1.3-7.7 1.2-15.5 6.8-21l85.9-85.1L358.6 200.5c-7.8-1.2-14.6-6.1-18.1-13.3L287.9 79z"/></svg>
                                    </button>
                                </div>
                            </div>
                            <div class="small mt-2" style="text-align: justify;" [innerHTML] = "this.artistInfoData.biography"></div>
                        </div>
                    </div>
                </div>

                <div>
                    <div *ngIf="userIsLoggedIn && selectedTab === 'ArtistInfo' && (!isLoadingDetail || !firstTimeLoading)">
                        <h3 *ngIf="userIsLoggedIn && similarArtists.length > 0" >Similar Artists</h3>
                        <div class="d-flex flex-row flex-nowrap overflow-auto mx-auto" id="similar-artist">
                            
                            <div *ngFor="let artist of similarArtists">
                                <div class="card artist-card me-2" style="width: 11.6rem;" (click)="onClickCard(artist.artist_id)" [class.artist-selected] = "artist.artist_id===clickedArtistCardId">
                                    
                                    <img [src]="artist.imageUrl" class="card-img-top" style="height: 180px; object-fit: cover;">
                
                                    <div *ngIf="userIsLoggedIn" class="card-img-overlay d-flex justify-content-end align-items-start p-2">
                
                                        <button *ngIf="!userFavoritesSet.has(artist.artist_id)" 
                                        (click)="toggleFavorites(artist.artist_id)" class="btn rounded-circle d-flex align-items-center justify-content-center p-1" style="background-color: #004d8f;">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" width="1.5em" height="1.5em"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path fill="white" d="M287.9 0c9.2 0 17.6 5.2 21.6 13.5l68.6 141.3 153.2 22.6c9 1.3 16.5 7.6 19.3 16.3s.5 18.1-5.9 24.5L433.6 328.4l26.2 155.6c1.5 9-2.2 18.1-9.7 23.5s-17.3 6-25.3 1.7l-137-73.2L151 509.1c-8.1 4.3-17.9 3.7-25.3-1.7s-11.2-14.5-9.7-23.5l26.2-155.6L31.1 218.2c-6.5-6.4-8.7-15.9-5.9-24.5s10.3-14.9 19.3-16.3l153.2-22.6L266.3 13.5C270.4 5.2 278.7 0 287.9 0zm0 79L235.4 187.2c-3.5 7.1-10.2 12.1-18.1 13.3L99 217.9 184.9 303c5.5 5.5 8.1 13.3 6.8 21L171.4 443.7l105.2-56.2c7.1-3.8 15.6-3.8 22.6 0l105.2 56.2L384.2 324.1c-1.3-7.7 1.2-15.5 6.8-21l85.9-85.1L358.6 200.5c-7.8-1.2-14.6-6.1-18.1-13.3L287.9 79z"/></svg>
                                        </button>
                                        <button *ngIf="userFavoritesSet.has(artist.artist_id)" 
                                        (click)="toggleFavorites(artist.artist_id)" class="btn rounded-circle d-flex align-items-center justify-content-center p-1" style="background-color: #004d8f;">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" width="1.5em" height="1.5em"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path fill="#ffcc00" d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"/>
                                            </svg>
                                        </button>
                                    </div>
            
                                    <div class="card-body rounded-bottom d-flex align-items-center">
                                        <h5 class="card-title text-white mb-0" style="font-size: 1.0rem;">{{artist.name}}</h5>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="tab-pane fade show active" *ngIf="selectedTab === 'Artwork'" id="pills-artworks" role="tabpanel" aria-labelledby="pills-artworks-tab">
                    <div class="alert alert-danger" role="alert" *ngIf="noArtworks">
                        No artworks.
                    </div>
                    
                    <div class="row">
                        <div class = "col-md-3 mb-3" *ngFor="let artwork of artistArtworks">
                            <div class="card card-artist">
                                <img [src]="artwork.imageUrl" class="card-img-top">
                                <div class="text-center my-2" style="font-size: 0.75rem">{{artwork.name}}, {{artwork.year}}</div>
                                <button class="viewCategoryButton py-1" data-bs-toggle="modal" data-bs-target="#artworkModal" style="font-size: 0.75rem" (click)="onClickViewCatrgoryButton(artwork)">View Categories</button>
                            </div>

                        </div>
                    </div>
                    <!-- <div class="text-center">
                        <div class="spinner-border" role="status" *ngIf="!similarArtistLoaded && isLoadingDetail" #205375>
                          <span class="visually-hidden">Loading...</span>
                        </div>
                    </div> -->

                            <!-- Modal -->
                            <div class="modal fade" id="artworkModal" tabindex="-1" aria-labelledby="artworkModalLabel" aria-hidden="true">
                                <div class="modal-dialog modal-lg">
                                  <div class="modal-content">
                                    <div class="modal-header">
                                      <div class="d-flex align-items-center" id="artworkModalLabel">
                                        <img [src]="categoriesData.artworkImage" *ngIf="!isLoadingCategory" style="height: 50px; width:auto" class="img-fluid">
                                        <div class="ms-2" style="font-size: 0.75rem">
                                            {{categoriesData.artworkname}}<br>
                                            {{categoriesData.year}}
                                        </div>
                                      </div>
                                      <button type="button" class="btn-close" style="border: 1px" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>

                                    <div class="alert alert-danger" role="alert" *ngIf="noCategoty">
                                        No categories.
                                    </div>

                                    <div class="text-center">
                                        <div class="spinner-border" role="status" *ngIf="isLoadingCategory" style="color: #205375;">
                                          <span class="visually-hidden">Loading...</span>
                                        </div>
                                    </div>
                                    <div class="modal-body">
                                        <div class="container-fluid">
                                            <div class="row" *ngIf="!isLoadingCategory" >
                                                <div class = "col-12 col-md-3 mb-3" *ngFor="let category of categoriesData.artworkCategories">
                                                    <div class="card card-category h-100">
                                                        <div class="ratio ratio-1x1">
                                                            <img [src]="category.imageUrl" class="card-img-top object-fit-cover">
                                                        </div>
                                                       <div class="text-center my-2" style="font-size: 0.75rem">{{category.name}}</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                  </div>
                                </div>
                            </div>
                </div>
                <div class="text-center">
                        <div class="spinner-border" role="status" *ngIf="isLoadingDetail" style="color: #205375;">
                      <span class="visually-hidden">Loading...</span>
                    </div>
                </div>
            </div>


    </div>
</div>
</div>
</div>
